---
import ServiceLayout from "../../layouts/ServiceLayout.astro";
import "../../styles/global.css";
import { Image } from "astro:assets";
import { PHONE_NUMBER } from "../../data/resource";
import { insuranceProviders } from "../../data/insurances";

const images = import.meta.glob<{ default: ImageMetadata }>(
  "../../assets/images/insurance/*.png",
);
---

<ServiceLayout 
  name="Insurance Coverage"
  description="We accept most major insurance providers"
>
  <main class="bg-indigo-950 min-h-screen py-16 px-4">
    <div class="max-w-7xl mx-auto">
      <header class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl font-black text-white mb-4">
          Accepted <span class="text-amber-500">Insurances</span>
        </h1>
        <p class="text-[#D4CFC7] text-lg max-w-2xl mx-auto">
          We work with most major insurance providers to make quality care accessible and affordable.
        </p>
      </header>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        {
          insuranceProviders.map((provider) => {
            // We dynamically build the path to match the imported images
            const imagePath = `../../assets/images/insurance/${provider.fileName}`;

            return (
              <div class="bg-white/5 border border-white/10 rounded-2xl p-6 flex flex-col items-center justify-center group hover:bg-white transition-all duration-300">
                <div class="h-16 flex items-center justify-center mb-4">
                  {images[imagePath] ? (
                    <Image
                      src={images[imagePath]()}
                      alt={provider.name}
                      width={200}
                      height={80}
                      class="max-h-12 w-auto object-contain grayscale-0 md:grayscale md:group-hover:grayscale-0 transition-all duration-500"
                    />
                  ) : (
                    <span class="text-white group-hover:text-indigo-950 font-bold">
                      {provider.name}
                    </span>
                  )}
                </div>
                <p class="text-[10px] font-black uppercase tracking-widest text-indigo-300 group-hover:text-indigo-950">
                  {provider.name}
                </p>
              </div>
            );
          })
        }
      </div>

      <section class="max-w-4xl mx-auto mt-16">
      <div
        class="bg-amber-500/10 border border-amber-500/30 p-10 rounded-[3rem] text-center"
      >
        <h2 class="text-2xl font-black text-white mb-4 italic">
          Don't see your provider?
        </h2>
        <p class="text-indigo-100/70 leading-relaxed mb-8">
          Insurance panels are frequently updated and not all clinicians are
          in-network with all of the above insurances. We also offer out-of-network billing
          support and private pay options for those seeking immediate care.
        </p>
        <a
          href={`tel:${PHONE_NUMBER}`}
          class="inline-block px-10 py-4 bg-amber-500 text-indigo-950 font-black rounded-xl hover:bg-white transition-all"
        >
          Verify Your Coverage
        </a>
      </div>
      </section>
    </div>
  </main>
</ServiceLayout>
